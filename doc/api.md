<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ServerSdk][1]
    -   [loginFow][2]
    -   [updateDataFlow][3]
    -   [registerFlow][4]
    -   [queryStatusFlow][5]
    -   [signCertificate][6]
    -   [rejectCertificate][7]
    -   [queryProofOfPath][8]
    -   [merkleProofCheckSingle][9]
-   [ServerSdk#kycRecord][10]
-   [ConstructorParams][11]
-   [ServerSdk#ConstructorParams][12]
-   [ServerSdk#findKycByIdHandler][13]
-   [ServerSdk#createKycHandler][14]
-   [ServerSdk#updateKycHandler][15]
-   [ServerSdk#QueryKycStatusHandler][16]
-   [ServerSdk#needRecheckExistingKycHandler][17]
-   [ServerSdk#generateSsoPayloadHandler][18]
-   [ServerSdk#KycRecordStatus#KycRecordFieldStatus][19]
-   [ServerSdk#KycRecordStatus][20]
-   [ServerSdk#kycProfile][21]
-   [ServerSdk#kycToken][22]
-   [ServerSdk#BlockpassMobileResponsePayload][23]
-   [ServerSdk#UploadDataRequest][24]

## ServerSdk

**Parameters**

-   `params` **...[ServerSdk#ConstructorParams][25]** 
    -   `params.baseUrl`  
    -   `params.clientId`  
    -   `params.secretId`  
    -   `params.requiredFields`  
    -   `params.optionalFields`  
    -   `params.certs`  
    -   `params.findKycById`  
    -   `params.createKyc`  
    -   `params.updateKyc`  
    -   `params.queryKycStatus`  
    -   `params.needRecheckExistingKyc`  
    -   `params.generateSsoPayload`  
    -   `params.encodeSessionData`  
    -   `params.decodeSessionData`  

### loginFow

Login Flow, handling SSO and AppLink login from Blockpass client.

-   Step 1: Handshake between Service and BlockPass
-   Step 2: Sync KycProfile with Blockpass
-   Step 3: Create / Update kycRecord via handler

**Parameters**

-   `$0` **any** 
    -   `$0.code`  
    -   `$0.sessionCode`  

Returns **[Promise][26]&lt;BlockpassMobileResponsePayload>** 

### updateDataFlow

Handle user data upload and fill-up kycRecord

-   Step 1: restore session from accessToken
-   Step 2: validate required fields provided by client vs serviceMetaData(required / optional)
-   Step 3: update raw data to kycRecord

**Parameters**

-   `params` **...[ServerSdk#UploadDataRequest][27]** 
    -   `params.accessToken`  
    -   `params.slugList`  
    -   `params.userRawData` **...any** 

Returns **[Promise][26]&lt;BlockpassMobileResponsePayload>** 

### registerFlow

Register flow, receiving user sign-up infomation and creating KycProcess.
This behaves the same as loginFlow except for it does not require sessionCode input

**Parameters**

-   `$0` **any** 
    -   `$0.code`  

Returns **[Promise][26]&lt;BlockpassMobileResponsePayload>** 

### queryStatusFlow

Query status of kyc record

**Parameters**

-   `$0` **any** 
    -   `$0.code`  

Returns **[Promise][26]&lt;KycRecordStatus>** 

### signCertificate

Sign new Certificate and send to Blockpass

**Parameters**

-   `$0` **any** 
    -   `$0.id`  
    -   `$0.kycRecord`  

Returns **[Promise][26]&lt;[boolean][28]>** 

### rejectCertificate

Reject a given Certificate

**Parameters**

-   `$0` **any** 
    -   `$0.profileId`  
    -   `$0.message`  

Returns **[Promise][26]&lt;[boolean][28]>** 

### queryProofOfPath

Query Merkle proof for a given slugList

**Parameters**

-   `$0` **any** 
    -   `$0.kycToken`  
    -   `$0.slugList`  

### merkleProofCheckSingle

Check Merkle proof for invidual field

**Parameters**

-   `rootHash` **[string][29]** : Root hash of kycRecord
-   `rawData` **([string][29] \| [Buffer][30])** : Raw data need to be check
-   `proofList` **[object][31]** : Proof introduction ( from queryProofOfPath response)

## ServerSdk#kycRecord

KYC Record Object

Type: [Object][31]

## ConstructorParams

* * *

## ServerSdk#ConstructorParams

Type: [Object][31]

**Properties**

-   `baseUrl` **[string][29]** : Blockpass Api Url (from developer dashboard)
-   `clientId` **[string][29]** : CliendId(from developer dashboard)
-   `secretId` **[string][29]** : SecretId(from developer dashboard)
-   `requiredFields` **\[[string][29]]** : Required identities fields(from developer dashboard)
-   `optionalFields` **\[[string][29]]** : Optional identities fields(from developer dashboard)
-   `findKycById` **[ServerSdk#findKycByIdHandler][32]** : Find KycRecord by id
-   `createKyc` **[ServerSdk#createKycHandler][33]** : Create new KycRecord
-   `updateKyc` **[ServerSdk#updateKycHandler][34]** : Update Kyc
-   `needRecheckExistingKyc` **[ServerSdk#needRecheckExistingKycHandler][35]?** : Performing logic to check existing kycRecord need re-submit data
-   `generateSsoPayload` **[ServerSdk#generateSsoPayloadHandler][36]?** : Return sso payload
-   `encodeSessionData` **function ([object][31]): [string][29]?** : Encode sessionData to string
-   `decodeSessionData` **function ([string][29]): [object][31]?** : Decode sessionData from string

## ServerSdk#findKycByIdHandler

Handler function to query Kyc record by Id

Type: [Function][37]

**Parameters**

-   `kycId` **[string][29]** 

Returns **[Promise][26]&lt;[ServerSdk#kycRecord][38]>** Kyc Record

## ServerSdk#createKycHandler

Handler function to create new KycRecord

Type: [Function][37]

**Parameters**

-   `kycProfile` **[ServerSdk#kycProfile][39]** 

Returns **[Promise][26]&lt;[ServerSdk#kycRecord][38]>** Kyc Record

## ServerSdk#updateKycHandler

Handler function to update existing KycRecord

Type: [Function][37]

**Parameters**

-   `kycRecord` **[ServerSdk#kycRecord][38]** 
-   `kycProfile` **[ServerSdk#kycProfile][39]** 
-   `kycToken` **[ServerSdk#kycToken][40]** 
-   `userRawData` **[Object][31]** 

Returns **[Promise][26]&lt;[ServerSdk#kycRecord][38]>** Kyc Record

## ServerSdk#QueryKycStatusHandler

Handler function to summary status of KycRecord

Type: [Function][37]

**Parameters**

-   `kycRecord` **[ServerSdk#kycRecord][38]** 

Returns **[Promise][26]&lt;[ServerSdk#KycRecordStatus][41]>** Kyc Record

## ServerSdk#needRecheckExistingKycHandler

Handler function return whether a KYC existing check is required

Type: [Function][37]

**Parameters**

-   `kycRecord` **[ServerSdk#kycRecord][38]** 
-   `kycProfile` **[ServerSdk#kycProfile][39]** 
-   `payload` **[Object][31]** 

Returns **[Promise][26]&lt;[Object][31]>** Payload return to client

## ServerSdk#generateSsoPayloadHandler

Handler function to generate SSo payload

Type: [Function][37]

**Parameters**

-   `kycRecord` **[ServerSdk#kycRecord][38]** 
-   `kycProfile` **[ServerSdk#kycProfile][39]** 
-   `kycToken` **[ServerSdk#kycToken][40]** 
-   `payload` **[Object][31]** 

## ServerSdk#KycRecordStatus#KycRecordFieldStatus

KYC Record 's Field Status

Type: [Object][31]

**Properties**

-   `slug` **[string][29]** : Slug name
-   `status` **[string][29]** : Approve status (recieved | recieved | approved)
-   `comment` **[string][29]** : Comment from reviewer

## ServerSdk#KycRecordStatus

KYC Record Status Object

Type: [Object][31]

**Properties**

-   `status` **[string][29]** : Status of KycRecord
-   `message` **[string][29]** : Summary text for currently KycRecord
-   `identities` **\[[ServerSdk#KycRecordStatus#KycRecordFieldStatus][42]]** : Identities status
-   `certificates` **\[[ServerSdk#KycRecordStatus#KycRecordFieldStatus][42]]** : Certificate status

## ServerSdk#kycProfile

KYC Profile Object

Type: [Object][31]

**Properties**

-   `id` **[string][29]** : Udid of kycProfile (assigned by blockpass)
-   `smartContractId` **[string][29]** : SmartContract user ID ( using to validate rootHash via Sc)
-   `rootHash` **[string][29]** : Currently Root Hash

## ServerSdk#kycToken

Type: [Object][31]

**Properties**

-   `access_token` **[string][29]** : AccessToken string
-   `expires_in` **[Number][43]** : Expired time in seconds
-   `refresh_token` **[string][29]** : Refresh token

## ServerSdk#BlockpassMobileResponsePayload

Response payload for Blockpass mobile app

Type: [Object][31]

**Properties**

-   `nextAction` **[string][29]** : Next action for mobile blockpass ("none" | "upload" | "website")
-   `message` **[string][29]?** : Custom message to display
-   `accessToken` **[string][29]?** : Encoded session into token ( using share data between multiple steps )
-   `requiredFields` **\[[string][29]]?** : Required identitites need to be send throught '/upload'
-   `optionalFields` **\[[string][29]]?** : Optional identitites (client can decline provide those info)

## ServerSdk#UploadDataRequest

Upload data from Blockpass mobile app

Type: [Object][31]

**Parameters**

-   `accessToken` **[string][29]** : Eencoded session data from /login or /register api
-   `slugList` **\[[string][29]]** : List of identities field supplied by blockpass client
-   `userRawData` **...[Object][31]** : Rest parameters contain User raw data from multiform/parts request. Following format below:

**Examples**

```javascript
{
 // string fields
 "phone": { type: 'string', value:'09xxx'},

 // buffer fields
 "selfie": { type: 'file', buffer: Buffer(..), originalname: 'fileOriginalName'}

 // certificate fields with `[cer]` prefix
 "[cer]onfido": {type: 'string', valur:'...'}

 ....
}
```

[1]: #serversdk

[2]: #loginfow

[3]: #updatedataflow

[4]: #registerflow

[5]: #querystatusflow

[6]: #signcertificate

[7]: #rejectcertificate

[8]: #queryproofofpath

[9]: #merkleproofchecksingle

[10]: #serversdkkycrecord

[11]: #constructorparams

[12]: #serversdkconstructorparams

[13]: #serversdkfindkycbyidhandler

[14]: #serversdkcreatekychandler

[15]: #serversdkupdatekychandler

[16]: #serversdkquerykycstatushandler

[17]: #serversdkneedrecheckexistingkychandler

[18]: #serversdkgeneratessopayloadhandler

[19]: #serversdkkycrecordstatuskycrecordfieldstatus

[20]: #serversdkkycrecordstatus

[21]: #serversdkkycprofile

[22]: #serversdkkyctoken

[23]: #serversdkblockpassmobileresponsepayload

[24]: #serversdkuploaddatarequest

[25]: #serversdkconstructorparams

[26]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[27]: #serversdkuploaddatarequest

[28]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[29]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[30]: https://nodejs.org/api/buffer.html

[31]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[32]: #serversdkfindkycbyidhandler

[33]: #serversdkcreatekychandler

[34]: #serversdkupdatekychandler

[35]: #serversdkneedrecheckexistingkychandler

[36]: #serversdkgeneratessopayloadhandler

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[38]: #serversdkkycrecord

[39]: #serversdkkycprofile

[40]: #serversdkkyctoken

[41]: #serversdkkycrecordstatus

[42]: #serversdkkycrecordstatuskycrecordfieldstatus

[43]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number
