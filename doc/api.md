<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [KycRecord][1]
-   [RawDataString][2]
    -   [Properties][3]
-   [RawDataFile][4]
    -   [Properties][5]
-   [RecordStatus][6]
-   [InvidualFieldStatus][7]
-   [SyncStatus][8]
-   [RecordFieldStatus][9]
    -   [Properties][10]
-   [RawDataUploadDataRequest][11]
    -   [Examples][12]
-   [MobileAppKycRecordStatus][13]
    -   [Properties][14]
-   [KycProfile][15]
    -   [Properties][16]
-   [KycToken][17]
    -   [Properties][18]
-   [NextActionType][19]
-   [BlockpassMobileResponsePayload][20]
    -   [Properties][21]
-   [FindKycByIdHandler][22]
    -   [Parameters][23]
-   [CreateKycHandler][24]
    -   [Parameters][25]
-   [UpdateKycHandler][26]
    -   [Parameters][27]
-   [QueryKycStatusHandler][28]
    -   [Parameters][29]
-   [ReSubmitCheckHandler][30]
    -   [Parameters][31]
-   [GenerateSsoPayloadHandler][32]
    -   [Parameters][33]
-   [GenerateRedirectPayloadHandler][34]
    -   [Parameters][35]
-   [ConstructorParams][36]
    -   [Properties][37]
-   [CertPromiseResponse][38]
    -   [Properties][39]
-   [ServerSdk][40]
    -   [Parameters][41]
    -   [fetchMetadata][42]
    -   [loginFow][43]
        -   [Parameters][44]
    -   [updateDataFlow][45]
        -   [Parameters][46]
    -   [registerFlow][47]
        -   [Parameters][48]
    -   [queryStatusFlow][49]
        -   [Parameters][50]
    -   [resubmitDataFlow][51]
        -   [Parameters][52]
    -   [userNotify][53]
        -   [Parameters][54]
    -   [deactivateUser][55]
        -   [Parameters][56]
    -   [fetchCertPromise][57]
        -   [Parameters][58]
    -   [pullCertPromise][59]
        -   [Parameters][60]
-   [Args][61]

## KycRecord

* * *

KYC Records

Type: [object][62]

## RawDataString

String fields from Mobile App

Type: [Object][62]

### Properties

-   `type` **`"string"`** 
-   `value` **[string][63]** 

## RawDataFile

Binary fields from Mobile App

Type: [Object][62]

### Properties

-   `type` **`"file"`** 
-   `buffer` **[Buffer][64]** 
-   `originalName` **[string][63]?** 

## RecordStatus

* * *

Currently KycRecord status: "notFound" | "waiting" | "inreview" | "approved"

Type: [string][63]

## InvidualFieldStatus

* * *

Status for invidual fields: "received" | "approved" | "rejected" | "missing";

Type: [string][63]

## SyncStatus

* * *

Kyc Profile 's syncing status: "syncing" | "complete"

Type: [string][63]

## RecordFieldStatus

* * *

KYC Record 's Field Status

Type: [object][62]

### Properties

-   `slug` **[string][63]** 
-   `status` **[InvidualFieldStatus][65]** 
-   `comment` **[string][63]** 

## RawDataUploadDataRequest

* * *

RawData upload from Mobile App

Type: [Object][62]&lt;[string][63], ([RawDataString][66] \| [RawDataFile][67])>

### Examples

```javascript
{
 // string fields
 "phone": { type: 'string', value:'09xxx'},

 // buffer fields
 "selfie": { type: 'file', buffer: Buffer(..), originalname: 'fileOriginalName'}

 // certificate fields with `[cer]` prefix
 "[cer]onfido": {type: 'string', value:'...'}

 ....
}
```

## MobileAppKycRecordStatus

* * *

KYC Record Status

Type: [object][62]

### Properties

-   `status` **[RecordStatus][68]** 
-   `allowCertPromise` **[Boolean][69]?** 
-   `message` **[string][63]?** 
-   `createdDate` **[Date][70]?** 
-   `identities` **\[[RecordFieldStatus][71]]?** 
-   `certificates` **\[[RecordFieldStatus][71]]?** 

## KycProfile

* * *

Blockpass Kyc Profile object

Type: [object][62]

### Properties

-   `id` **[string][63]** 
-   `smartContractId` **[string][63]** 
-   `rootHash` **[string][63]** 
-   `isSynching` **[SyncStatus][72]** 

## KycToken

* * *

Blockpass KycToken object

Type: [object][62]

### Properties

-   `access_token` **[string][63]** 
-   `expires_in` **[Number][73]** 
-   `refresh_token` **[string][63]** 

## NextActionType

* * *

Client Next action: "none" | "upload"

Type: [string][63]

## BlockpassMobileResponsePayload

* * *

Blockpass Mobile Response

Type: [object][62]

### Properties

-   `nextAction` **[NextActionType][74]** 
-   `message` **[string][63]?** 
-   `accessToken` **[string][63]?** 
-   `requiredFields` **\[[string][63]]?** 
-   `optionalFields` **\[[string][63]]?** 

## FindKycByIdHandler

* * *

Handler function to query Kyc record by Id

Type: [Function][75]

### Parameters

-   `kycId` **[string][63]** 

Returns **[Promise][76]&lt;[KycRecord][77]>** 

## CreateKycHandler

* * *

Handler function to create new KycRecord

Type: [Function][75]

### Parameters

-   `params` **[Object][62]** 
    -   `params.kycProfile` **[KycProfile][78]** 

Returns **[Promise][76]&lt;[KycRecord][77]>** 

## UpdateKycHandler

* * *

Handler function to update existing KycRecord

Type: [Function][75]

### Parameters

-   `params` **[Object][62]** 
    -   `params.kycProfile` **[KycProfile][78]** 
    -   `params.kycRecord` **[KycRecord][77]** 
    -   `params.kycToken` **[KycToken][79]** 
    -   `params.userRawData` **[Object][62]** 

Returns **[Promise][76]&lt;[KycRecord][77]>** 

## QueryKycStatusHandler

* * *

Handler function to summary status of KycRecord

Type: [Function][75]

### Parameters

-   `params` **[Object][62]** 
    -   `params.kycRecord` **[KycRecord][77]** 

Returns **[Promise][76]&lt;[MobileAppKycRecordStatus][80]>** 

## ReSubmitCheckHandler

* * *

Handler function processing user resubmit request

Type: [Function][75]

### Parameters

-   `params` **[Object][62]** 
    -   `params.kycProfile` **[KycProfile][78]** 
    -   `params.kycRecord` **[KycRecord][77]** 
    -   `params.kycToken` **[KycToken][79]** 
    -   `params.payload` **[Object][62]** 

Returns **[Promise][76]&lt;[BlockpassMobileResponsePayload][81]>** 

## GenerateSsoPayloadHandler

* * *

Handler function to generate SSo payload

Type: [Function][75]

### Parameters

-   `params` **[Object][62]** 
    -   `params.kycProfile` **[KycProfile][78]** 
    -   `params.kycRecord` **[KycRecord][77]** 
    -   `params.kycToken` **[KycToken][79]** 
    -   `params.payload` **[Object][62]** 

Returns **[Promise][76]&lt;[BlockpassMobileResponsePayload][81]>** 

## GenerateRedirectPayloadHandler

* * *

Handler function to generate Redirect payload

Type: [Function][75]

### Parameters

-   `params` **[Object][62]** 
    -   `params.kycProfile` **[KycProfile][78]** 
    -   `params.kycRecord` **[KycRecord][77]** 
    -   `params.kycToken` **[KycToken][79]** 
    -   `params.payload` **[Object][62]** 

Returns **[Promise][76]&lt;any>** Query string values

## ConstructorParams

* * *

Type: [Object][62]

### Properties

-   `baseUrl` **[string][63]** 
-   `clientId` **[string][63]** 
-   `secretId` **[string][63]** 
-   `requiredFields` **\[[string][63]]** 
-   `optionalFields` **\[[string][63]]** 
-   `certs` **\[[string][63]]** 
-   `findKycById` **[FindKycByIdHandler][82]** 
-   `createKyc` **[CreateKycHandler][83]** 
-   `updateKyc` **[UpdateKycHandler][84]** 
-   `queryKycStatus` **[QueryKycStatusHandler][85]** 
-   `onResubmitKycData` **[ReSubmitCheckHandler][86]?** 
-   `generateSsoPayload` **[GenerateSsoPayloadHandler][87]?** 
-   `redirectAfterCompletedRegisterPayload` **[GenerateRedirectPayloadHandler][88]?** 
-   `encodeSessionData` **function (payload: any): [string][63]??** 
-   `decodeSessionData` **function (payload: [string][63]): any??** 
-   `debug` **[boolean][69]** 
-   `autoFetchMetadata` **[boolean][69]** 

## CertPromiseResponse

* * *

Blockpass Certpromise Response object

Type: [object][62]

### Properties

-   `slug` **[string][63]** 
-   `raw` **[string][63]** 

## ServerSdk

**Extends EventEmitter**

### Parameters

-   `params` **[ConstructorParams][89]** 
    -   `params.baseUrl`  
    -   `params.clientId`  
    -   `params.secretId`  
    -   `params.requiredFields`  
    -   `params.optionalFields`  
    -   `params.certs`  
    -   `params.findKycById`  
    -   `params.createKyc`  
    -   `params.updateKyc`  
    -   `params.queryKycStatus`  
    -   `params.onResubmitKycData`  
    -   `params.generateSsoPayload`  
    -   `params.redirectAfterCompletedRegisterPayload`  
    -   `params.encodeSessionData`  
    -   `params.decodeSessionData`  
    -   `params.debug`  
    -   `params.autoFetchMetadata`  

### fetchMetadata

Refresh service Metadata

### loginFow

* * *

Login Flow, handling SSO and AppLink login from Blockpass client.

-   Step 1: Handshake between Service and BlockPass
-   Step 2: Sync KycProfile with Blockpass
-   Step 3: Create / Update kycRecord via handler

#### Parameters

-   `params` **[Object][62]** 
    -   `params.code`  
    -   `params.sessionCode`  
    -   `params.refId`  

Returns **[Promise][76]&lt;[BlockpassMobileResponsePayload][81]>** 

### updateDataFlow

* * *

Handle user data upload and fill-up kycRecord

-   Step 1: restore session from accessToken
-   Step 2: validate required fields provided by client vs serviceMetaData(required / optional)
-   Step 3: update raw data to kycRecord

#### Parameters

-   `params` **[RawDataUploadDataRequest][90]** 
    -   `params.accessToken`  
    -   `params.slugList`  
    -   `params.userRawData` **...any** 

Returns **[Promise][76]&lt;[BlockpassMobileResponsePayload][81]>** 

### registerFlow

* * *

Register flow, receiving user sign-up infomation and creating KycProcess.
This behaves the same as loginFlow except for it does not require sessionCode input

#### Parameters

-   `params` **[Object][62]** 
    -   `params.code`  
    -   `params.refId`  

Returns **[Promise][76]&lt;[BlockpassMobileResponsePayload][81]>** 

### queryStatusFlow

* * *

Query status of kyc record

#### Parameters

-   `params` **[Object][62]** 
    -   `params.code`  
    -   `params.sessionCode`  

Returns **[Promise][76]&lt;[MobileAppKycRecordStatus][80]>** 

### resubmitDataFlow

* * *

Resubmit data flow

#### Parameters

-   `params` **[Object][62]** 
    -   `params.code`  
    -   `params.fieldList`  
    -   `params.certList`  

### userNotify

Send user notification

-   IF user registerPN -> PN will send
-   User will recieved message in their inbox

#### Parameters

-   `params` **[Object][62]** 
    -   `params.message`  
    -   `params.action`   (optional, default `''`)
    -   `params.bpToken`  
    -   `params.type`  

### deactivateUser

Deactivate connection with user

#### Parameters

-   `params` **[Object][62]** 
    -   `params.bpToken`  

### fetchCertPromise

Fetch all certPromise and their status for record

#### Parameters

-   `$0` **{bpToken: [KycToken][79]}** 
    -   `$0.bpToken`  

### pullCertPromise

Pull certPromise data

#### Parameters

-   `$0` **{bpToken: [KycToken][79], certPromiseId: [string][63]}** 
    -   `$0.bpToken`  
    -   `$0.certPromiseId`  

Returns **[Promise][76]&lt;([CertPromiseResponse][91] | void)>** 

## Args

Check dose SHA256(CertificateRawString) still valid or not (revoked by issuer)

Type: [Object][62]

[1]: #kycrecord

[2]: #rawdatastring

[3]: #properties

[4]: #rawdatafile

[5]: #properties-1

[6]: #recordstatus

[7]: #invidualfieldstatus

[8]: #syncstatus

[9]: #recordfieldstatus

[10]: #properties-2

[11]: #rawdatauploaddatarequest

[12]: #examples

[13]: #mobileappkycrecordstatus

[14]: #properties-3

[15]: #kycprofile

[16]: #properties-4

[17]: #kyctoken

[18]: #properties-5

[19]: #nextactiontype

[20]: #blockpassmobileresponsepayload

[21]: #properties-6

[22]: #findkycbyidhandler

[23]: #parameters

[24]: #createkychandler

[25]: #parameters-1

[26]: #updatekychandler

[27]: #parameters-2

[28]: #querykycstatushandler

[29]: #parameters-3

[30]: #resubmitcheckhandler

[31]: #parameters-4

[32]: #generatessopayloadhandler

[33]: #parameters-5

[34]: #generateredirectpayloadhandler

[35]: #parameters-6

[36]: #constructorparams

[37]: #properties-7

[38]: #certpromiseresponse

[39]: #properties-8

[40]: #serversdk

[41]: #parameters-7

[42]: #fetchmetadata

[43]: #loginfow

[44]: #parameters-8

[45]: #updatedataflow

[46]: #parameters-9

[47]: #registerflow

[48]: #parameters-10

[49]: #querystatusflow

[50]: #parameters-11

[51]: #resubmitdataflow

[52]: #parameters-12

[53]: #usernotify

[54]: #parameters-13

[55]: #deactivateuser

[56]: #parameters-14

[57]: #fetchcertpromise

[58]: #parameters-15

[59]: #pullcertpromise

[60]: #parameters-16

[61]: #args

[62]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[63]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[64]: https://nodejs.org/api/buffer.html

[65]: #invidualfieldstatus

[66]: #rawdatastring

[67]: #rawdatafile

[68]: #recordstatus

[69]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[70]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date

[71]: #recordfieldstatus

[72]: #syncstatus

[73]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[74]: #nextactiontype

[75]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[76]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[77]: #kycrecord

[78]: #kycprofile

[79]: #kyctoken

[80]: #mobileappkycrecordstatus

[81]: #blockpassmobileresponsepayload

[82]: #findkycbyidhandler

[83]: #createkychandler

[84]: #updatekychandler

[85]: #querykycstatushandler

[86]: #resubmitcheckhandler

[87]: #generatessopayloadhandler

[88]: #generateredirectpayloadhandler

[89]: #constructorparams

[90]: #rawdatauploaddatarequest

[91]: #certpromiseresponse
