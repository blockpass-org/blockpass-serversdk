<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [ServerSdk][1]
    -   [loginFow][2]
    -   [updateDataFlow][3]
    -   [registerFlow][4]
    -   [queryStatusFlow][5]
    -   [signCertificate][6]
    -   [rejectCertificate][7]
    -   [queryProofOfPath][8]
    -   [userNotify][9]
    -   [merkleProofCheckSingle][10]
-   [ConstructorParams][11]
-   [KycRecord][12]
-   [RawDataUploadDataRequest][13]
-   [RawDataString][14]
-   [RawDataFile][15]
-   [MobileAppKycRecordStatus][16]
-   [RecordStatus][17]
-   [RecordFieldStatus][18]
-   [InvidualFieldStatus][19]
-   [KycProfile][20]
-   [SyncStatus][21]
-   [KycToken][22]
-   [NextActionType][23]
-   [BlockpassMobileResponsePayload][24]
-   [FindKycByIdHandler][25]
-   [CreateKycHandler][26]
-   [UpdateKycHandler][27]
-   [QueryKycStatusHandler][28]
-   [ReCheckKycRecordHandler][29]
-   [GenerateSsoPayloadHandler][30]

## ServerSdk

**Parameters**

-   `params` **[ConstructorParams][31]** 
    -   `params.baseUrl`  
    -   `params.clientId`  
    -   `params.secretId`  
    -   `params.requiredFields`  
    -   `params.optionalFields`  
    -   `params.certs`  
    -   `params.findKycById`  
    -   `params.createKyc`  
    -   `params.updateKyc`  
    -   `params.queryKycStatus`  
    -   `params.needRecheckExistingKyc`  
    -   `params.generateSsoPayload`  
    -   `params.encodeSessionData`  
    -   `params.decodeSessionData`  

### loginFow

* * *

Login Flow, handling SSO and AppLink login from Blockpass client.

-   Step 1: Handshake between Service and BlockPass
-   Step 2: Sync KycProfile with Blockpass
-   Step 3: Create / Update kycRecord via handler

**Parameters**

-   `params` **[Object][32]** 
    -   `params.code`  
    -   `params.sessionCode`  

Returns **[Promise][33]&lt;[BlockpassMobileResponsePayload][34]>** 

### updateDataFlow

* * *

Handle user data upload and fill-up kycRecord

-   Step 1: restore session from accessToken
-   Step 2: validate required fields provided by client vs serviceMetaData(required / optional)
-   Step 3: update raw data to kycRecord

**Parameters**

-   `params` **[RawDataUploadDataRequest][35]** 
    -   `params.accessToken`  
    -   `params.slugList`  
    -   `params.userRawData` **...any** 

Returns **[Promise][33]&lt;[BlockpassMobileResponsePayload][34]>** 

### registerFlow

* * *

Register flow, receiving user sign-up infomation and creating KycProcess.
This behaves the same as loginFlow except for it does not require sessionCode input

**Parameters**

-   `params` **[Object][32]** 
    -   `params.code`  

Returns **[Promise][33]&lt;[BlockpassMobileResponsePayload][34]>** 

### queryStatusFlow

* * *

Query status of kyc record

**Parameters**

-   `params` **[Object][32]** 
    -   `params.code`  
    -   `params.sessionCode`  

Returns **[Promise][33]&lt;[MobileAppKycRecordStatus][36]>** 

### signCertificate

* * *

Sign new Certificate and send to Blockpass

**Parameters**

-   `params` **[Object][32]** 
    -   `params.id`  
    -   `params.kycRecord`  

Returns **[Promise][33]&lt;[boolean][37]>** 

### rejectCertificate

* * *

Reject a given Certificate

**Parameters**

-   `params` **[Object][32]** 
    -   `params.profileId`  
    -   `params.message`  

Returns **[Promise][33]&lt;[boolean][37]>** 

### queryProofOfPath

* * *

Query Merkle proof for a given slugList

**Parameters**

-   `params` **[Object][32]** 
    -   `params.kycToken`  
    -   `params.slugList`  

### userNotify

* * *

Send Notification to user

**Parameters**

-   `params` **[Object][32]** 
    -   `params.message`  
    -   `params.title`  
    -   `params.bpToken`  

Returns **any** 

### merkleProofCheckSingle

* * *

Check Merkle proof for invidual field

**Parameters**

-   `rootHash` **[string][38]** 
-   `rawData` **([string][38] \| [Buffer][39])** 
-   `proofList` **any** 

## ConstructorParams

* * *

Type: [Object][32]

**Properties**

-   `baseUrl` **[string][38]** 
-   `clientId` **[string][38]** 
-   `secretId` **[string][38]** 
-   `requiredFields` **\[[string][38]]** 
-   `optionalFields` **\[[string][38]]** 
-   `certs` **\[[string][38]]** 
-   `findKycById` **[FindKycByIdHandler][40]** 
-   `createKyc` **[CreateKycHandler][41]** 
-   `updateKyc` **[UpdateKycHandler][42]** 
-   `queryKycStatus` **[QueryKycStatusHandler][43]** 
-   `needRecheckExistingKyc` **[ReCheckKycRecordHandler][44]?** 
-   `generateSsoPayload` **[GenerateSsoPayloadHandler][45]?** 
-   `encodeSessionData` **function (payload: any): [string][38]??** 
-   `decodeSessionData` **function (payload: [string][38]): any??** 

## KycRecord

* * *

KYC Records

Type: [object][32]

## RawDataUploadDataRequest

* * *

RawData upload from Mobile App

Type: [Object][32]&lt;[string][38], ([RawDataString][46] \| [RawDataFile][47])>

**Examples**

```javascript
{
 // string fields
 "phone": { type: 'string', value:'09xxx'},

 // buffer fields
 "selfie": { type: 'file', buffer: Buffer(..), originalname: 'fileOriginalName'}

 // certificate fields with `[cer]` prefix
 "[cer]onfido": {type: 'string', value:'...'}

 ....
}
```

## RawDataString

String fields from Mobile App

Type: [Object][32]

**Properties**

-   `type` **`"string"`** 
-   `value` **[string][38]** 

## RawDataFile

Binary fields from Mobile App

Type: [Object][32]

**Properties**

-   `type` **`"file"`** 
-   `buffer` **[Buffer][39]** 
-   `originalName` **[string][38]?** 

## MobileAppKycRecordStatus

* * *

KYC Record Status

Type: [object][32]

**Properties**

-   `status` **[RecordStatus][48]** 
-   `message` **[string][38]?** 
-   `createdDate` **[Date][49]?** 
-   `identities` **\[[RecordFieldStatus][50]]?** 
-   `certificates` **\[[RecordFieldStatus][50]]?** 

## RecordStatus

* * *

Currently KycRecord status: "notFound" | "waiting" | "inreview" | "approved"

Type: [string][38]

## RecordFieldStatus

* * *

KYC Record 's Field Status

Type: [object][32]

**Properties**

-   `slug` **[string][38]** 
-   `status` **[InvidualFieldStatus][51]** 
-   `comment` **[string][38]** 

## InvidualFieldStatus

* * *

Status for invidual fields: "received" | "approved" | "rejected" | "missing";

Type: [string][38]

## KycProfile

* * *

Blockpass Kyc Profile object

Type: [object][32]

**Properties**

-   `id` **[string][38]** 
-   `smartContractId` **[string][38]** 
-   `rootHash` **[string][38]** 
-   `isSynching` **[SyncStatus][52]** 

## SyncStatus

* * *

Kyc Profile 's syncing status: "syncing" | "complete"

Type: [string][38]

## KycToken

* * *

Blockpass KycToken object

Type: [object][32]

**Properties**

-   `access_token` **[string][38]** 
-   `expires_in` **[Number][53]** 
-   `refresh_token` **[string][38]** 

## NextActionType

* * *

Client Next action: "none" | "upload"

Type: [string][38]

## BlockpassMobileResponsePayload

* * *

Blockpass Mobile Response

Type: [object][32]

**Properties**

-   `nextAction` **[NextActionType][54]** 
-   `message` **[string][38]?** 
-   `accessToken` **[string][38]?** 
-   `requiredFields` **\[[string][38]]?** 
-   `optionalFields` **\[[string][38]]?** 

## FindKycByIdHandler

* * *

Handler function to query Kyc record by Id

Type: [Function][55]

**Parameters**

-   `kycId` **[string][38]** 

Returns **[Promise][33]&lt;[KycRecord][56]>** 

## CreateKycHandler

* * *

Handler function to create new KycRecord

Type: [Function][55]

**Parameters**

-   `params` **[Object][32]** 
    -   `params.kycProfile` **[KycProfile][57]** 

Returns **[Promise][33]&lt;[KycRecord][56]>** 

## UpdateKycHandler

* * *

Handler function to update existing KycRecord

Type: [Function][55]

**Parameters**

-   `params` **[Object][32]** 
    -   `params.kycProfile` **[KycProfile][57]** 
    -   `params.kycRecord` **[KycRecord][56]** 
    -   `params.kycToken` **[KycToken][58]** 
    -   `params.userRawData` **[Object][32]** 

Returns **[Promise][33]&lt;[KycRecord][56]>** 

## QueryKycStatusHandler

* * *

Handler function to summary status of KycRecord

Type: [Function][55]

**Parameters**

-   `params` **[Object][32]** 
    -   `params.kycRecord` **[KycRecord][56]** 

Returns **[Promise][33]&lt;[MobileAppKycRecordStatus][36]>** 

## ReCheckKycRecordHandler

* * *

Handler function return whether a KYC existing check is required

Type: [Function][55]

**Parameters**

-   `params` **[Object][32]** 
    -   `params.kycProfile` **[KycProfile][57]** 
    -   `params.kycRecord` **[KycRecord][56]** 
    -   `params.kycToken` **[KycToken][58]** 
    -   `params.payload` **[Object][32]** 

Returns **[Promise][33]&lt;[Object][32]>** 

## GenerateSsoPayloadHandler

* * *

Handler function to generate SSo payload

Type: [Function][55]

**Parameters**

-   `params` **[Object][32]** 
    -   `params.kycProfile` **[KycProfile][57]** 
    -   `params.kycRecord` **[KycRecord][56]** 
    -   `params.kycToken` **[KycToken][58]** 
    -   `params.payload` **[Object][32]** 

[1]: #serversdk

[2]: #loginfow

[3]: #updatedataflow

[4]: #registerflow

[5]: #querystatusflow

[6]: #signcertificate

[7]: #rejectcertificate

[8]: #queryproofofpath

[9]: #usernotify

[10]: #merkleproofchecksingle

[11]: #constructorparams

[12]: #kycrecord

[13]: #rawdatauploaddatarequest

[14]: #rawdatastring

[15]: #rawdatafile

[16]: #mobileappkycrecordstatus

[17]: #recordstatus

[18]: #recordfieldstatus

[19]: #invidualfieldstatus

[20]: #kycprofile

[21]: #syncstatus

[22]: #kyctoken

[23]: #nextactiontype

[24]: #blockpassmobileresponsepayload

[25]: #findkycbyidhandler

[26]: #createkychandler

[27]: #updatekychandler

[28]: #querykycstatushandler

[29]: #recheckkycrecordhandler

[30]: #generatessopayloadhandler

[31]: #constructorparams

[32]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[33]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[34]: #blockpassmobileresponsepayload

[35]: #rawdatauploaddatarequest

[36]: #mobileappkycrecordstatus

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[39]: https://nodejs.org/api/buffer.html

[40]: #findkycbyidhandler

[41]: #createkychandler

[42]: #updatekychandler

[43]: #querykycstatushandler

[44]: #recheckkycrecordhandler

[45]: #generatessopayloadhandler

[46]: #rawdatastring

[47]: #rawdatafile

[48]: #recordstatus

[49]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date

[50]: #recordfieldstatus

[51]: #invidualfieldstatus

[52]: #syncstatus

[53]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[54]: #nextactiontype

[55]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[56]: #kycrecord

[57]: #kycprofile

[58]: #kyctoken
